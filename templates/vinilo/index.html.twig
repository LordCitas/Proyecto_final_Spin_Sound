{% extends 'base.html.twig' %}

{% block title %}Viniland - Product Listing{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}

{% block body %}
  <main class="container mx-auto px-4 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
      <aside class="lg:col-span-1">
        {# Include the filters form (sub-template) #}
        {% include 'vinilo/_filters.html.twig' %}
      </aside>

      <section class="lg:col-span-3">
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-2xl font-bold">Todos los productos</h1>
          <div>
            <label class="text-sm mr-2">Ordenar por:</label>
            <select class="form-select rounded px-3 py-2 text-sm">
              <option>Relevancia</option>
              <option>Precio: de menor a mayor</option>
              <option>Precio: de mayor a menor</option>
              <option>Novedades</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {% for vinilo in vinilos %}
            <article class="rounded-lg bg-surface-light dark:bg-surface-dark overflow-hidden shadow">
              <a href="{{ path('app_vinilo_show', {'id': vinilo.id}) }}" class="block">
                <div class="aspect-square bg-center bg-cover" style="background-image: url('{{ vinilo.portada ?? 'https://via.placeholder.com/400' }}')"></div>
                <div class="p-4">
                  <h3 class="font-semibold">{{ vinilo.titulo }}</h3>
                  <p class="text-sm text-on-surface-muted-light dark:text-on-surface-muted-dark">
                    {% if vinilo.artistas is empty %}
                      —
                    {% else %}
                      {% for artista in vinilo.artistas %}
                        {{ artista.nombre }}{% if not loop.last %}, {% endif %}
                      {% endfor %}
                    {% endif %}
                  </p>
                  <div class="mt-2 font-bold">{{ vinilo.precio }} €</div>
                </div>
              </a>
            </article>
          {% else %}
            <div>No hay productos.</div>
          {% endfor %}
        </div>

        <nav class="mt-8 flex justify-center">
          {# Simple pagination placeholder #}
          <a class="px-3 py-1">&laquo; anterior</a>
          <span class="px-3 py-1">1</span>
          <a class="px-3 py-1">siguiente &raquo;</a>
        </nav>
      </section>
    </div>
  </main>
{% endblock %}
