{% extends 'base.html.twig' %}

{% block title %}Spin&Sound - Vinilos{% endblock %}

{% block body %}
<main class="container mx-auto px-4 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">

        <aside class="lg:col-span-1">
            {% include 'vinilo/_filters.html.twig' %}
            <form method="get" action="{{ path('app_vinilo_index') }}" class="mt-4 space-y-3 rounded-xl bg-surface-dark p-4">
                <h3 class="font-semibold text-white">Buscar</h3>
                <input type="text" name="q" value="{{ query }}" placeholder="Artista, álbum..."
                    class="w-full rounded-lg border-0 bg-background-dark px-4 py-2 text-sm text-white placeholder:text-on-surface-muted-dark focus:outline-none focus:ring-2 focus:ring-primary"/>
                <button type="submit" class="w-full rounded-lg py-2 text-sm font-bold text-white" style="background-color: #cf6329;">
                    Buscar
                </button>
            </form>
        </aside>

        <section class="lg:col-span-3">
            <h1 class="text-2xl font-bold text-white mb-6">
                {% if query %}
                    Resultados para <span class="text-primary">"{{ query }}"</span>
                {% else %}
                    Catálogo de Vinilos
                {% endif %}
            </h1>

            {% if vinilos is not empty %}
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    {% for vinilo in vinilos %}
                        <article class="group rounded-xl bg-surface-dark overflow-hidden shadow-lg hover:shadow-primary/20 transition-shadow">
                            <a href="{{ path('app_vinilo_show', {id: vinilo.id}) }}" class="block">
                                <div class="aspect-square overflow-hidden bg-background-dark flex items-center justify-center">
                                    <div class="aspect-square overflow-hidden bg-background-dark flex items-center justify-center">
                                        <svg fill="currentColor" class="h-16 w-16 text-on-surface-muted-dark" viewBox="0 0 256 256">
                                            <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm40-96a40,40,0,1,1-40-40A40,40,0,0,1,168,120Zm-16,0a24,24,0,1,0-24,24A24,24,0,0,0,152,120Z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="p-4">
                                    <h3 class="font-semibold text-white text-sm leading-snug line-clamp-2">{{ vinilo.titulo }}</h3>
                                    {% if vinilo.artistas.first %}
                                        <p class="mt-1 text-xs text-primary">{{ vinilo.artistas.first.nombre }}</p>
                                    {% endif %}
                                    <p class="mt-1 text-xs text-on-surface-muted-dark">{{ vinilo.precio }} €</p>
                                </div>
                            </a>
                            <div class="px-4 pb-4">
                                <button class="w-full rounded-lg py-2 text-sm font-bold text-white transition-transform hover:scale-105" style="background-color: #cf6329;">
                                    Añadir al carrito
                                </button>
                            </div>
                        </article>
                    {% endfor %}
                </div>
            {% else %}
                <div class="flex flex-col items-center justify-center py-24 text-center">
                    <p class="text-on-surface-muted-dark text-lg">No se encontraron vinilos</p>
                </div>
            {% endif %}

        </section>
    </div>
</main>
{% endblock %}
